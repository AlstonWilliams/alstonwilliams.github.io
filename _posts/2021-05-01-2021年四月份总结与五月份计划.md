---
layout: post
title: 2021年四月份总结与五月份计划
date: 2021-05-01
author: AlstonWilliams
header-img: img/post-bg-2015.jpg
catalog: true
categories:
- 路漫漫其修远兮
tags:
- 路漫漫其修远兮
---

## 生活

越来越觉得时间不够用。一天的时间，除了工作和睡觉，只有几个小时能用。

而空闲时间要做的事情实在太多，除了深入学习技术，还要做运动上半身减脂并训练胸肌腹肌，还要学习钢琴，还要进行阅读，还有一些压力很大但不知道怎么解决的事情。

本来每天跑步一小时，卧推和仰卧起坐五轮，每轮15个上倾卧推，15个下倾卧推，15个仰卧起坐，五轮下来大概要30-40分钟。但这样每天花在运动上的时间实在太多，刚好换工作之后可以每天骑行上下班，也算是运动了。所以现在改成每天回家之后做重训5轮就好了。然后每两天做一次。

至于钢琴，简版卡农练习了第一页。很慢。相对于之前学习吉他的热情，明显能感觉后劲不足。

到了现在，能感受到自己对音乐也没有很热爱。甚至还考虑过要把吉他，钢琴卖掉算了，搬家还费劲。

在每月的计划中，练习钢琴，练习吉他这一项，也总是会放到最后才去完成。钢琴大概是月中才开始学习卡农。而其他的计划，比如阅读，则是月初就开始执行了。

二十多年来，从识字开始，阅读这个习惯就一直陪着我。小时倒也不是自律，只是乡下生活，特别是自己在家的时候，也没有什么其他事情能去做，就只能阅读来打发时间。那时候读的书都是小说，玄幻类的，校园约架类的。

阅读是为数不多的可以满足各个年龄阶段的习惯。有各种书籍，从小孩子，到年轻人，到中年人，再到老年人，都能找到合适的书籍，并从中收获到一些东西。

二十多年来一直保持阅读，也是因为从中感受到了乐趣，学习到了东西。小时候是感受到了快乐，成年之后则是从中学习到了如何理财，如何管理，看到了世界的方方面面。

而其他的一些乐趣，比如学习钢琴，学习音乐。这些虽然在学习的过程中，学习完一段之后，感受到自己的进步，虽然也很快乐。但不够持久。

每次对音乐感兴趣，大概在都是自己带有感情地时候。这时候会去听一些音乐。有流行音乐，也有钢琴曲。听的音乐大多偏向消极，对积极的音乐我没什么感受，也理解不了。音乐听多了，也就想唱，想弹了。

一段时间之后，走出消极，回归正常生活的时候。对音乐的喜爱也就慢慢褪去了。

所以音乐对我来说更像是一个可以依靠的东西。我可以用它来抒发我的消极情感。即使不能够自己创作，但练习的过程中也能抒发自己的情感。

抒发情感的方法，除了音乐，还有写作。写作这个东西，可以随意挥洒，随意创作。你开心的时候，把开心的事情记录下来，写下来，慷慨激昂。你难过的时候，把内心的忧愁写下来，像怀才不遇的才子。而音乐这东西，音符就那么多。其实说起来应该比文字简单。文字那么多，常用的也有几百上千。还有古文，诗词，我们在怀有情绪的时候都能通过文字来抒发情感，为什么到了音乐这儿，就那么一些音符，却不知道如何用它自如抒发情感呢？

文字这个东西，从我们小学开始，在以后的日子里，一直在重复练习，到了后面已经被我们掌握了。写下的东西有时虽粗糙简陋，但毕竟也是创作。而音乐这东西，打小就没有训练过，现在从头开始学起。而现在也只能算是还在蹒跚学步的阶段，要能自由抒发情感，自由创作，需要成为作曲家吧。

对一个外行来说，仅仅通过业余时间来学习，要掌握音乐这门语言太困难了。还是先做到能够背诵复刻的程度再说吧。

这想想也怪可笑。原来开心或者失落时喜欢音乐是想通过音乐表达自己地情感，但又啥都不会所以情感也表达不出来。就只是瞎鼓捣一番。

这也揪出了导致我对音乐失去乐趣的元凶了。本来学习音乐是为了表达情感，但练习的过程中却渐渐地更注重形式，丢失了灵魂。而形式都是固定的，就那么几种，所以学习的过程中也就感受不到什么乐趣了。

其他的东西，像做菜，慢慢的失去激情。也是因为更注重术，而忽视道吧。就一味照着菜谱去做，而忽视了自己创作的乐趣。虽然能保证做出来的味道没什么问题，但那种创作过程中的酸甜苦辣却没有了。这样做菜不也只是行尸走肉吗？

做菜做了两年，毕竟还是了解各种调料的味道，一次做的不喜欢后面可以看人家怎么然后再进行尝试。但学音乐则就像刚开始学做饭一样，摸着石头过河。

学音乐固然是为了表达情感。但困扰我的还有就是很容易混乱。因为学钢琴首先要会五线谱，虽然之前学过流行音乐的基本套路，但我最终目标终究是想弹古典音乐。要看懂五线谱，首先基础乐理知识要懂得，这些我在学习吉他的时候都已经了解了。学习五线谱另一个难点是要认识每个音符，以及在键盘上的位置。这个我通过五线谱教师这个软件也大致学习会了。见到每个音符都能迅速知道它在五线谱上的位置。

但钢琴毕竟是左右手配合。在流行音乐中学习到的几种套路，到这儿已经不适合了，而且学习流行音乐时看的是简谱，很多五线谱中的内容表达出来。所以后面学习钢琴就需要自己去领域。

看不懂五线谱这个我解决了，找不到激情也解决了，以为是因为还达不到自己作曲的水平不能自由表达情感导致的，但这个水平要求极高，不是一朝一夕所能达到的。后面在逼自己继续练习的时候，发现让我没有激情的原因不是因为表达不了情感，而是弹奏太过混乱。

我看五线谱的时候，是高音区和低音区分别看一个音符去弹奏，这样子应该是不对的。这样会导致弹起来根本无迹可寻。一点规律找不出来。民谣吉他弹奏时有规律，左手按和弦，和弦套路都是固定的，右手弹奏音符。和弦按多了就很容易进行切换，不需要关注。弹奏时注意力在右手就好了。

我百思不得其解的时候，想起女朋友来弹奏的时候是如何弹奏的。还真的得到了启发。

她看谱的时候，是高音区一小节先右手弹一下，然后低音区一小节左手弹一下，然后再两只手一起弹奏。我也试了一下这种方法。后来就发现了很多规律。

看起来和吉他有些类似。在我学习的简版卡农的前20小节中，左手套路只有两种，而右手的节奏却都是不相同的。这就很像民谣吉他的弹奏。

后来也采用这种套路练习，原本一天只能学会一小节的，后面一天可以学习两个小节。找到规律就轻松了很多。

原本的做法就像是三心二意，同时做两件事，所以很混乱。想想自己平时有些时候做事也是容易三心二意。对待工作和学习还好，单线程，一件做完了再去做其他的事情。而对待娱乐却不是，比如看电视的时候总觉得浪费时间又用手机刷新闻看。

这件事也给了我更多的信心。之前总是觉得自己笨的不行，一天只能学一小节还慢的要死。果然做事方法正确才能事半功倍啊。

从女朋友身上学习到了很多东西，这让我们生活习性越来越相近。有一些事情是当时察觉不到但后面才觉得她说的有道理的。像做卧推的方法上，做仰卧起坐的方法，都是她告诉我做错了然后才去找正确的方法改正的。还有对厨房的清洁，对家庭的清洁，也都是从她身上学习来的。

学习这些东西的过程中，也发现一个习惯的养成不需要21天那么久。第一次尝试肯定会有些抵触，但做第二次，第三次，第四次就会轻松很多。第五次就会不自觉的去做。像跑步，第一次跑觉得要死了，第二次跑觉得也还好，但还是很累，第三次跑就觉得没那么累了。后面再跑就觉得很轻松了。当然一件事要把它变成持续一辈子的习惯确实需要更长的时间。

但一个习惯放弃可不容易。人就有这么一种特性，由俭入奢易，由奢入俭难。这都是相同的道理。失去总是不容易。

所以尽量还是不要养成坏的习惯。我养成了熬夜的坏习惯，想改正却一直都没有改正过来。虽然自己明白熬夜会导致脱发，会导致身体出各种问题，但就还是很难改正。再加把劲试试看吧。

## 技术思考

本月技术方面接触的比较多，一方面是自我要求，另一方面是公司技术方案选型需要。接触了很多技术，没有深入研究，但对于技术选型足够了。

先是Flink课程学习完毕，这个课程有实战部分，但实战部分要做的项目也不复杂。学完之后，后面再使用层面应该没有太大问题。至于优化方面，就得在实战中锤炼了。

后面为了某个技术方案的设计，接触了Hudi，Presto，ClickHouse，Doris。

主要就是了解并对比各种组件的索引机制。索引主要分几种：

一种是MySQL等关系型数据库里面最常用的B+树索引，它的优点是对OLTP支持好，对写操作友好，但缺陷是一次只能用一个索引。

另一种就是像ES中的倒排索引，结合前缀压缩，term排序等机制，能很好的提高查询速度。而且一个查询可以通过Bitmap或者跳表的方式使用多个索引。缺陷也很明显，就是对更新不友好。

还有一些像Doris，ClickHouse中采取的稀疏索引，就是将数据分成一个一个的block，然后取开头或者结尾的key做一个索引，每个对应一个block。这种也需要key预先进行排序。

还有一些像Kafka内部采取的索引机制，和MapReduce，Spark的shuffle机制有些类似，都是有一个索引文件以及一堆数据文件，然后从索引文件中拿到对应的位置读取数据。但这种不适合用在查询系统上。这个索引只是系统内部用的。

还有一些稠密索引，像Bitmap索引，HashMap索引等。只适用于数据量小的情况，所以一般都是辅助稀疏索引来用。

而该技术方案的设计需要重点关注读的性能。读性能提升很大程度上就看能不能依赖索引机制。从上面对索引的对比能看出来，ES，ClickHouse，Doris里面都是可以充分利用稀疏索引的。而Hudi作为一种存储格式，为了支持更快的更新数据支持建立索引，但这个索引对查询提速似乎没什么用。至于Presto，它只是一个查询工具，可以借助外部索引机制加速查询。Presto对ORC有特殊优化，能将查询条件下推，而Hudi目前只支持Avro和Parquet两种格式。所以Presto+Hudi是没有任何索引能用的，不过Hudi中引入了clustering机制，据说极大提高了性能，这个性能能不能接受就得去测试了。

后面在学习完一个ClickHouse视频之后，对ClickHouse的内部索引机制以及操作有个进一步的认识之后，也渐渐地在怀疑为什么要用ClickHouse而不是其他的MPP引擎。

ClickHouse对分布式的封装远远不够，分布式表对用户不透明，运维复杂。而其索引机制也无非就是一个稀疏索引而已。而且ClickHouse得副本策略让我很迷惑，副本是在建表的时候通过ReplicateMergeTree确定的，一方面这样操作起来，配置起来很复杂，另一方面是副本管理起来复杂。像HDFS这种分布式存储系统，副本对于用户是透明的，而且副本的管理对于用户也是透明的。在读写数据时，还会优先选择较近的节点去读写，然后同步到其他副本上。这样就能很好地做到数据本地原则，也能很好的实现负载均衡。而ClickHouse则是在建表时就固定好了，副本无法实现负载均衡。而且ClickHouse副本之间进行数据同步的时候，是通过ZooKeeper。也就是说，对于分布式表，并且不断有数据插入的情况，性能是会有问题的。ZooKeeper内部通过Zab算法保证Leader与Follower之间数据一致，一个proposal要被提交首先需要一半以上的节点同意。这涉及到网络，不同节点协调的问题，而且ZooKeeper实现的是最终一致性(可以选择，也可以选择强一致性，这样Follower会将全部请求转发到Leader上，这可能导致Leadet节点压力过大)，所以ZooKeeper不适合进行频繁的写操作。所以ZooKeeper应用最广的几个场景，一个是分布式锁，一个是服务协同，一个是配置管理。最开始Kafka用ZooKeeper管理offset，后来也弃用了ZooKeeper。

所以这个ClickHouse的课程我是越看越迷。它给我的感受就是一个单机数据库，披上了分布式的皮。

后面在考虑有什么能够代替它的产品的时候，可选的也不多。ClickHouse是MPP架构，支持通过不同的engine支持不同的特性，比如副本，统计指标，去重等。MPP架构的产品有很多，支持去重的产品也不少，支持实时数据接入的产品不少，支持统计指标的也不少。但要完全做到这些的产品没怎么有。另一个和它对比的就是Doris了，上面说的特性Doris也都支持，但是对于Doris的容错性这一块我还没有细看。

所以啊，我认为ClickHouse在数据单机能放得下的场景应该还不错，分布式场景就有些捉襟见肘。ClickHouse的运维复杂性也是知名的复杂。这些都限制了其在分布式场景中的作为。而Doris使用的厂商没有特别多，大家都在摸着石头过河。

对比了不同的组件在存储格式和索引上的差异以后，我有两个问题，还没有答案：
1. 列式存储时，如何找到一行完整的数据。
2. 不管哪种索引，该列都最好是按序递增的。那么，对于稀疏索引来说，如果该列不是递增的，索引是如何变动的？

这两个问题Google上我没找到答案，等有时间找个相关知名开源项目的源码看一下。

## 阅读

偶然看到一本书，叫做《巴拉巴西成功定律》。通过介绍，对这本书还挺有兴趣，就读了一下。

这本书内容确实不错，不是鸡汤，讲的还是蛮中肯的。有些因素对职业生涯确实影响很大，我是有切身体会的。

书中最引起我思考的就是为了证明成功是由社会认同决定的，而不是自己努力就能成功所引用的关于艺术的例子。

大概两年之前，当时附庸风雅，也会去看一些展，读一些艺术史的书籍。这段时间自己对艺术的了解提升了很多，但也慢慢让我有些厌恶艺术。

一方面是很多实在欣赏不来，我能理解的只有印象派，极简主义，还有一些纪实类的作品。艺术欣赏和个人性格关系很大。喜欢印象派是因为本身就梦想仗剑走天涯，喜欢看风景。喜欢极简主义则是很喜欢它的条理，简洁，干净。喜欢纪实类的作品则是因为知道世界并不总是美好的，美丽和丑恶共存。而其他的作品我欣赏不来，也就没什么兴趣。另一方面，是逐渐意识到，即使有那么多人声称喜欢艺术，也只是为了显得自己多么有情调。好多人去看展并没有真正理解作品的含义，表达出了什么情感，自己是否理解这种情感并引起共鸣，而只是拍张照就好了。过去看展的时候，经常遇到这种人，而那时候我也是其中的一员，厌恶这种环境，也就厌恶当时的自己。到现在，就是有时会看看有什么展览。有没有自己感兴趣的。有的话就定个时间去看。但大多时候都是没有的。

这本书中援引的例子，也说明了这个世界，不管哪个方向，探索者总是只有那么几个，绝大多数不过就是随波逐流。像书中提到的《蒙娜丽莎》，《戴金盔的男子》的经历，就能看到好多人去欣赏作品只是冲着作者的名气去的。这让我感到很恶心。

一幅画，当署名为知名画家的时候，去看的人趋之若鹜。当后面被证明是一位不知名画家画的时候，就门可罗雀了。

人们总是会为自己可笑的行为找借口。只要这个借口被大多数人相信，那也就成了事实了。

在这个时代，最不应该相信的就是名气。那么多沽名钓誉之辈，名气是靠宣传包装出来的，而不是真的靠真才实学。去看这种人的作品，甚至明明他做的还不如自己，还要怀疑自己做错了要去改正，岂不是可笑至极？

所以啊，欣赏作品，就冲着作品本身，结合自己的审美观，自己的视角，理解作品，形成自己的见解，而不是人云亦云。这样才是欣赏艺术，乃至学习的态度。

走马观花般地翻阅了《大投机家》系列书籍。但系列书对我影响最大的就是《大投机家：一个投机者的自白》这一本。还有一本是《大投机家：股票培训班》。里面通过问答形式展示了很多投机理念。像另一本《大投机家：最佳金钱故事》这些也几本也都不错。

但我也只是走马观花地翻阅了一遍，并没有很认真的去读。因为我买基金是按照投资的理念去买的，像投机用到的期货，汇率等我用不到。

读的另一本书是《长日将尽》。这本书我读完以后并没有特别大的感受。开始被种草是因为简介里面说这本书展示了为了工作而牺牲自己生活的景象，并探讨值不值得。联想到国内的加班文化，就非常想读一下。

但读完之后我特别能理解男主。跟国内很多浑浑噩噩的为了工作牺牲生活的环境不一样，男主是相信他的工作能让国家，让世界变得和平，也就是说是为了理想牺牲了爱情，亲情。其实牺牲了爱情和工作也没太大关系。要我说还是因为男主自身性格特点。

这本书读下来我没感觉男主做法有什么问题，也没有感觉到作者想要表达的"你是如何为了成就事业而荒废了你的人生，又是如何在个人的层面上蹉跎了一辈子的"。要我说成就事业本来就是人生的一部分，像乔布斯那种算是为了成就事业荒废人生吗？人生难道就只是平淡的度过就不算荒废了？能成就理想的事业，并享受生活，这不才是完整的人生吗？

至于"如何在个人的层面蹉跎了一辈子的"这个我也不理解。书中是用男主花了一辈子服侍一位错误的主人来否认男主一辈子的价值。而这个主人错误的原因是他因为他的善良正直被当成了纳粹在英国的旗子。这儿我就很不能理解，固然这位主人有过错，难道男主服饰他就一辈子毫无价值吗？男主在服侍他的过程中也成就了自己的愿望——做一位伟大的管家。这个伟大体现在对主人的忠诚，自己的敬业度。而不是主人是否在做正确的事。

男主固然也想推动世界和平的进程，但这只是锦上添花。他是一位管家，能做好本职工作，服侍好主人，成为一位伟大的管家，不就已经可以了吗？如果蹉跎一辈子的标准是是否对世界产生了重要贡献，那有多少人是没有蹉跎人生的？有人没有蹉跎人生吗？

所以我认为男主一点问题没有。自然也就感受不到作者想表达的"你是如何为了成就事业而荒废了你的人生，又是如何在个人的层面上蹉跎了一辈子的"。当然可能在作者的价值观里是那个样子，但对我的价值观来说，我认为男主达成了预期的成就。

读的另一本书——《人间失格》则让我不知道为什么这本书会口碑那么好。这本书在我看来太过阴暗，是一本我绝对不想再读第二遍的书，并且也绝对不会推荐别人读的书。

这本书在我看来就是一些神经不正常的人的世界。这本书展示的很成功，把我代入一个疯子的世界体验了一番。体验完之后，就觉得平平无奇的生活原来也很棒。

知乎上搜了如何评价这本书。看到好几个答案拿自己的抑郁症来说明。

微信读书上对这本书的评价，竟然说是美学！我真的搞不明白美在哪里。

一本充斥着死亡气息的书籍。也算是美？

看起来我的审美和日本文学作品有些差距。以后还是看日本纪实类作品就好了，不要再读他们的小说了。

## 理财

这个月理财方面中规中矩，收益大概在5.1%左右。一方面买了全球头部互联网企业的股票，一方面又买了一些物联网，5G方面的股票。像最近大火的碳中和概念则没有去买。这东西虽然看起来挺有前景，但我完全不懂，也就没那么在意了。


说来也巧，这个月的盈利是我一次误操作导致的。我在周末买入的基金，然后周一看到股市大跌，心想这家伙完蛋了。但后来才知道周末买入就是按照周一收盘价计算成本价格的，所以我实际上是按照下跌之后的价格买入的。这就赚了大概2%。

这个月对基金也没有之前那么上心了。就放在那儿也不动。也不怎么去看它。

## 五月份计划

- 阅读平台代码，了解其架构
- 多看一些公开课
- Parquet中如何找到一行完整记录
- 翻译文章投稿
- 办理居住证
- 发际线修复
- 体重降低到160斤(165)
- 继续学习卡农，要熟练掌握前19小节，学习第20-60小节（已学习到第50小节）
- 减少不必要的开销(✔)
- 通过ES代码学习上面提到的两个问题（已通过其它资料了解答案，但没有看过源码）
- 阅读《格局》(垃圾，弃读)
- 获取推荐渠道(✔)
- 阅读《我的漂亮朋友》(✔)
- 阅读《当你的才华还撑不起你的梦想时》(✔)
- 遇到问题先拆解成子目标并制定计划(✔)
- 阅读《使女的故事》(✔)
- 了解平台架构，数据流向(✔)
- 看完《怪奇物语》(✔)
